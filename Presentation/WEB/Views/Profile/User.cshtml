@using System.Security.Claims;

@model AppUser

@{
	bool isFollowing = Model.Followees.Any(x => x.FollowerId == User.FindFirstValue(ClaimTypes.NameIdentifier));

}



<div style="background-image:url(/assets/assets/img/@Model.BackImage)" class="container-fluid page-header py-5 mb-5">
	<div class="container py-5">
		<h1 class="display-3 text-white mb-3 animated slideInDown">@Model.UserName</h1>
		<nav aria-label="breadcrumb animated slideInDown">
			<ol class="breadcrumb">
				<li class="breadcrumb-item"><a class="text-white" asp-action="index" asp-controller="home">Home</a></li>
				<li class="breadcrumb-item text-white active" aria-current="page">@Model.UserName</li>
			</ol>
		</nav>
	</div>
</div>
<!-- About Start -->
<div class="container-fluid bg-light overflow-hidden my-5 px-lg-0">
	<div class="container about px-lg-0">
		<div class="row g-0 mx-lg-0">
			<div class="col-lg-6 ps-lg-0" style="min-height: 400px;">
				<div class="position-relative h-100">
					<img class="position-absolute img-fluid w-100 h-100" src="~/assets/assets/img/@Model.MainImage" style="object-fit: cover;" alt="">
				</div>
			</div>
			<div class="col-lg-6 about-text py-5 wow fadeIn" data-wow-delay="0.5s">
				<div class="p-lg-5 pe-lg-0">
					<div class="section-title text-start">
						<h1 class="display-5 mb-4">@(Model.Name + Model.Surname)</h1>
						<p class="mb-4 pb-2">@@@Model.UserName</p>


					</div>
					<p class="mb-4 pb-2">@Model.SelfInformation</p>
					<div class="row g-4 mb-4 pb-2">
						<div class="col-sm-6 wow fadeIn" data-wow-delay="0.1s">
							<div class="d-flex align-items-center">
								<div class="d-flex flex-shrink-0 align-items-center justify-content-center bg-white" style="width: 60px; height: 60px;">
									<i class="fa fa-users fa-2x text-primary"></i>
								</div>
								<div class="ms-3">
									<h2 class="text-primary mb-1" data-toggle="counter-up">@Model.FollowerCount</h2>
									<p class="fw-medium mb-0">Followers</p>
								</div>

							</div>
						</div>
						<div class="col-sm-6 wow fadeIn" data-wow-delay="0.1s">
							<div class="d-flex align-items-center">
								<div class="d-flex flex-shrink-0 align-items-center justify-content-center bg-white" style="width: 60px; height: 60px;">
									<i class="fa fa-users fa-2x text-primary"></i>
								</div>

								<div class="ms-3">
									<h2 class="text-primary mb-1" data-toggle="counter-up">@Model.FollowingCount</h2>
									<p class="fw-medium mb-0">Following</p>
								</div>
							</div>
						</div>
						<div class="col-sm-6 wow fadeIn" data-wow-delay="0.3s"> 
							@if (User.Identity.Name == Model.UserName)
							{
								<div class="d-flex align-items-center">
									<a asp-action="index" asp-controller="library" asp-route-id="@Model.Id">
										<div class="d-flex flex-shrink-0 align-items-center justify-content-center bg-white" style="width: 60px; height: 60px;">
											<i class="fa fa-check fa-2x text-primary"></i>
										</div>
									</a>
									<div class="ms-3">
										<h2 class="text-primary mb-1" data-toggle="counter-up">@Model.LibraryItems.Count</h2>
										<p class="fw-medium mb-0">Reading Book</p>
									</div>
								</div>
							}
							@if (User.Identity.Name != Model.UserName)
							{
								@if (!isFollowing)
								{
									<a asp-controller="Profile" asp-action="Follow" asp-route-followeeId="@Model.Id" class="btn btn-primary py-3 px-5">Follow</a>
								}
								else
								{
									<a asp-controller="Profile" asp-action="unfollow" asp-route-followeeId="@Model.Id" class="btn btn-primary py-3 px-5">Unfollow</a>

								}
							}
							else
							{
								<a asp-controller="Profile" asp-action="edit" asp-route-username="@Model.UserName" class="btn btn-primary py-3 px-5">Edit Profile</a>

							}
						</div>
						@if (User.IsInRole("Writer") )
						{
							<div class="col-sm-6 wow fadeIn" data-wow-delay="0.3s">
								<div class="d-flex align-items-center">
									<a asp-action="index" asp-controller="book">
										<div class="d-flex flex-shrink-0 align-items-center justify-content-center bg-white" style="width: 60px; height: 60px;">
											<i class="fa fa-check fa-2x text-primary"></i>
										</div>
									</a>
									<div class="ms-3">
										<h2 class="text-primary mb-1" data-toggle="counter-up">@Model.Books.Count</h2>
										<p class="fw-medium mb-0">My Books</p>
									</div>
								</div>
							</div>
						}
						@if (User.Identity.Name != Model.UserName)
						{
							<div class="col-sm-6 wow fadeIn" data-wow-delay="0.3s">
								<div class="d-flex align-items-center">
									
										<div class="d-flex flex-shrink-0 align-items-center justify-content-center bg-white" style="width: 60px; height: 60px;">
											<i class="fa fa-check fa-2x text-primary"></i>
										</div>
									
									<div class="ms-3">
										<h2 class="text-primary mb-1" data-toggle="counter-up">@Model.Books.Count</h2>
										<p class="fw-medium mb-0">User Books</p>
									</div>
								</div>
							</div>
						}
					</div>


				</div>
			</div>
		</div>
	</div>
</div>
<!-- About End -->
<!-- Team Start -->
@if (User.IsInRole("Writer"))
{
	@foreach (var item in Model.Books)
	{
		<div class="container-xxl py-5">
			<div class="container">
				<div class="section-title text-center">
					<h1 class="display-5 mb-5">My Books</h1>
				</div>
				<div class="row g-4">

					<div class="col-lg-3 col-md-6 wow fadeInUp" data-wow-delay="0.1s">
						<div class="team-item">
							<div class="overflow-hidden position-relative">
								<a asp-action="detail" asp-controller="book" asp-route-id="@item.Id"><img class="img-fluid" src="~/assets/assets/img/@item.CoverPhoto" alt=""></a>

							</div>
							<div class="text-center border border-5 border-light border-top-0 p-4">
								<h5 class="mb-0">@item.Name</h5>
								<small>@item.Description</small>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>
	}
}
<!-- Team End -->
