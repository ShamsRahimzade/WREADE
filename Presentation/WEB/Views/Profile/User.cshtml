@using System.Security.Claims;

@model AppUser

@{
	bool isFollowing = Model.Followees.Any(x => x.FollowerId == User.FindFirstValue(ClaimTypes.NameIdentifier));
}


<main>
	<div class="padding" style="display:flex; justify-content:center;">
		<div class="col-md-8">
			<!-- Column -->
			<div class="card">
				<img class="card-img-top" src="~/assets/images/@Model.BackImage" alt="Card image cap" style="display:flex; justify-content:center;">
				<div class="card-body little-profile text-center">
					<div class="pro-img"><img src="~/assets/images/@Model.MainImage" alt="user"></div>
					<h3 class="m-b-0">@(Model.Name + Model.Surname)</h3>
					<p>@@@Model.UserName</p>
					@if (User.Identity.IsAuthenticated)
					{


						@if (User.Identity.Name == Model.UserName)
						{
							<div class="social-links">
								<ul class="header-nav d-flex flex-wrap justify-start p-0 m-0">
									<li><a asp-action="Edit" asp-route-username="@Model.UserName"><i class="ri-pencil-line"></i></a></li>
									<li><a href="javascript:void();"><i class="ri-settings-4-line"></i></a></li>
								</ul>
							</div>

						}
						else
						{
							if (!isFollowing)
							{
								<div class="social-links">
									<ul class="header-nav d-flex flex-wrap justify-start p-0 m-0">
										<a asp-controller="Profile" asp-action="Follow" asp-route-followeeId="@Model.Id">
										<li class=" rounded p-2  mr-3"> Follow</li></a>

									</ul>
								</div>
							}
							else
							{
								<div class="social-links">
									<ul class="header-nav d-flex flex-wrap justify-start p-0 m-0">
										<a asp-controller="Profile" asp-action="Unfollow" asp-route-followeeId="@Model.Id">
										<li class=" rounded p-2  mr-3"> Unfollow</li></a>

									</ul>
								</div>
							}
						}
					}
					else
					{
						<div class="social-links">
							<ul class="header-nav d-flex flex-wrap justify-start p-0 m-0">
								<a asp-controller="appuser" asp-action="register" asp-route-followeeId="@Model.Id">
								<li class=" rounded p-2  mr-3"> Follow</li></a>

							</ul>
						</div>
					}
					<div class="row text-center m-t-20">
						<div class="col-lg-6 col-md-6 m-t-20">
							<h3 class="m-b-0 font-light">@Model.FollowingCount</h3><small>Following</small>
						</div>
						<div class="col-lg-6 col-md-6 m-t-20">
							<h3 class="m-b-0 font-light">@Model.FollowerCount</h3><small>Followers</small>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>


</main>
<style>
	body {
		background-color: #d7dfe3;
	}

	.padding {
		padding: 9rem !important;
		margin-left: 15px
	}

	.card-img-top {
		height: 300px;
		background-position: center;
	}


	.card-no-border .card {
		border-color: #d7dfe3;
		border-radius: 4px;
		margin-bottom: 30px;
		-webkit-box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.05);
		box-shadow: 0px 5px 20px rgba(0, 0, 0, 0.05)
	}

	.card-body {
		-ms-flex: 1 1 auto;
		flex: 1 1 auto;
		padding: 1.25rem
	}

	.pro-img {
		margin-top: -80px;
		margin-bottom: 20px
	}

	.little-profile .pro-img img {
		width: 128px;
		height: 128px;
		-webkit-box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
		box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);
		border-radius: 100%
	}

	html body .m-b-0 {
		margin-bottom: 0px
	}

	h3 {
		line-height: 30px;
		font-size: 21px
	}

	.btn-rounded.btn-md {
		padding: 1px 35px;
		font-size: 16px
	}

	html body .m-t-10 {
		margin-top: 10px
	}

	.btn-primary,
	.btn-primary.disabled {
		background: #7460ee;
		border: 1px solid #7460ee;
		-webkit-box-shadow: 0 2px 2px 0 rgba(116, 96, 238, 0.14), 0 3px 1px -2px rgba(116, 96, 238, 0.2), 0 1px 5px 0 rgba(116, 96, 238, 0.12);
		box-shadow: 0 2px 2px 0 rgba(116, 96, 238, 0.14), 0 3px 1px -2px rgba(116, 96, 238, 0.2), 0 1px 5px 0 rgba(116, 96, 238, 0.12);
		-webkit-transition: 0.2s ease-in;
		-o-transition: 0.2s ease-in;
		transition: 0.2s ease-in
	}

	.btn-rounded {
		border-radius: 60px;
		padding: 7px 18px
	}

	.m-t-20 {
		margin-top: 60px
	}

	.text-center {
		text-align: center !important
	}

	h1,
	h2,
	h3,
	h4,
	h5,
	h6 {
		color: #455a64;
		font-family: "Poppins", sans-serif;
		font-weight: 400
	}

	p {
		margin-top: 0;
		margin-bottom: 1rem
	}</style>